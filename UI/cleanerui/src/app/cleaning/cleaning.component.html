<div class="container mt-5">

  <ng-container *ngIf="showWaitingMessage">
    <div class="message text-center mt-3">
      <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <p class="mt-2">Please wait...</p>
    </div>
  </ng-container>

  <ng-template #noPastHistory>
    <div class="alert alert-info d-flex align-items-center justify-content-center" role="alert"
      *ngIf="!showWaitingMessage">
      <p class="mb-0">No past cleaning history available.</p>
    </div>
  </ng-template>

  <ng-container *ngIf="!showWaitingMessage && futureCleaningHistoryList.length > 0; else noFutureHistory">
    <h3>Future Cleaning History</h3>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>User Room</th>
          <th>Completed</th>
          <th>Cleaning Quality</th>
          <th>Cleaning Duration (mins)</th>
          <th>Date</th>
          <th>Created At</th>
          <th>Schedule Cleaning</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let history of futureCleaningHistoryList">
          <td>{{ history.userRoomName }}</td>
          <td>{{ history.completed ? 'Yes' : 'No' }}</td>
          <td>{{ history.cleaningQuality ? history.cleaningQuality : 'NAN' }}</td>
          <td>{{ history.cleaningDurationInMins ? history.cleaningDurationInMins : 'NAN' }}</td>
          <td>{{ history.date ? (history.date | date: 'yyyy-MM-dd') : 'NAN' }}</td>
          <td>{{ history.createdAt ? (history.createdAt | date: 'yyyy-MM-dd') : 'NAN' }}</td>
          <td>
            <button class="btn btn-primary" (click)="onScheduleClick(history)">Schedule</button>
          </td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <ng-container *ngIf="!showWaitingMessage && pastCleaningHistoryList.length > 0; else noPastHistory">
    <h3>Past Cleaning History</h3>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>User Room</th>
          <th>Completed</th>
          <th>Cleaning Quality</th>
          <th>Cleaning Duration (mins)</th>
          <th>Date</th>
          <th>Updated At</th>
          <th>Complete</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let history of pastCleaningHistoryList">
          <td>{{ history.userRoomName }}</td>
          <td>{{ history.completed ? 'Yes' : 'No' }}</td>
          <td>{{ history.cleaningQuality ? history.cleaningQuality : 'NAN' }}</td>
          <td>{{ history.cleaningDurationInMins ? history.cleaningDurationInMins : 'NAN' }}</td>
          <td>{{ history.date ? (history.date | date: 'yyyy-MM-dd') : 'NAN' }}</td>
          <td>{{ history.updatedAt ? (history.updatedAt | date: 'yyyy-MM-dd') : 'NAN' }}</td>
          <td>
            <button class="btn btn-primary" (click)="onButtonClick(history.id)">Complete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </ng-container>


  <ng-template #noFutureHistory>
    <div class="alert alert-info d-flex align-items-center justify-content-center" role="alert"
      *ngIf="!showWaitingMessage">
      <p class="mb-0">No future cleaning history available.</p>
    </div>
  </ng-template>
</div>